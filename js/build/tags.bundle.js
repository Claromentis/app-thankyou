define(["jquery"],function(t){return function(t){function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}var e={};return i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="/intranet/thankyou/js/build/",i(i.s=1)}({"./js/src/tags.js":function(t,i,e){var s,a;s=[e(0)],void 0!==(a=function(t){var i=function(){this.button_class_active=".js-tag-admin-active",this.button_class_edit=".js-tag-admin-edit",this.button_class_reset=".js-tag-admin-reset",this.button_next=t("#tags_admin_next"),this.button_previous=t("#tags_admin_previous"),this.button_save=t("#tags_admin_save"),this.button_cancel=t("#tags_admin_cancel"),this.displayed_tags={},this.limit=1,this.offset=0,this.page=1,this.page_count=1,this.template_tag_admin=t("#template_tag_admin"),this.tags_list=t("#tags_admin_list"),this.loaded_tags={},this.modified_tags={},this.tags_list.on("click",this.button_class_edit,function(){e.editTag(this.closest(".js-tag-admin").getAttribute("data-id"))}),this.tags_list.on("click",this.button_class_active,function(){var t=this.closest(".js-tag-admin").getAttribute("data-id"),i=JSON.parse(JSON.stringify(e.getTag(t)));i.active=!i.active,e.storeEdit(t,i)}),this.tags_list.on("click",this.button_class_reset,function(){var t=this.closest(".js-tag-admin").getAttribute("data-id");e.resetEdit(t)})};i.prototype.changePage=function(t){var i=this;this.page=t,this.offset=(i.page-1)*this.limit,this.loadTags(this.limit,this.offset,function(t){i.setTags(t)}),this.checkPageNavigation()},i.prototype.createTag=function(t,i){var e={id:t,name:i.name,active:i.active,resetable:t in this.modified_tags};return _.template(this.template_tag_admin.html())(e)},i.prototype.editTag=function(t){console.log(t)},i.prototype.loadTags=function(i,e,s){t.ajax("/api/thankyou/v2/tags?limit="+i+"&offset="+e).done(function(t){"function"==typeof s&&s(t)})},i.prototype.loadPageCount=function(){var i=this;t.ajax("/api/thankyou/v2/tags/total").done(function(t){i.page_count=Math.ceil(t/i.limit),i.checkPageNavigation()})},i.prototype.getTag=function(t){return t in this.modified_tags?this.modified_tags[t]:this.loaded_tags[t]},i.prototype.resetAll=function(){this.modified_tags={},this.setTags(this.displayed_tags),this.checkModified()},i.prototype.resetEdit=function(t){delete this.modified_tags[t],t in this.displayed_tags&&this.setTags(this.displayed_tags),this.checkModified()},i.prototype.save=function(){console.log(this.modified_tags)},i.prototype.setTags=function(t){this.displayed_tags=t;var i="";for(var e in t){e in this.loaded_tags||(this.loaded_tags[e]=t[e]);var s=this.getTag(e);i+=this.createTag(e,s)}this.tags_list.html(i)},i.prototype.storeEdit=function(t,i){this.modified_tags[t]=i,_.isEqual(this.modified_tags[t],this.loaded_tags[t])?this.resetEdit(t):(t in this.displayed_tags&&this.setTags(this.displayed_tags),this.checkModified())},i.prototype.checkModified=function(){0!==Object.keys(this.modified_tags).length?(this.button_save.show(),this.button_cancel.show()):(this.button_save.hide(),this.button_cancel.hide())},i.prototype.checkPageNavigation=function(){var t=this.page;1===t?this.button_previous.hide():this.button_previous.show(),t===this.page_count?this.button_next.hide():this.button_next.show()};var e=new i;return e.loadPageCount(),e.changePage(e.page),e.button_next.click(function(){e.changePage(e.page+1)}),e.button_previous.click(function(){e.changePage(e.page-1)}),e.button_save.click(function(){e.save()}),e.button_cancel.click(function(){e.resetAll()}),e}.apply(i,s))&&(t.exports=a)},0:function(i,e){i.exports=t},1:function(t,i,e){t.exports=e("./js/src/tags.js")}})});