<block id="admin_breadcrumb">
	<li><a href="/thankyou/admin/">
		<loc name="thankyou:admin:breadcrumb">Thank You</loc>
	</a></li>
	<li class="active">
		<loc name="thankyou:admin:core_values"></loc>
	</li>
</block>
<block id="info_panel_pills">
	<include file="menu.html"/>
</block>

<block id="page_body">
	<h3>
		<loc name="thankyou:admin:core_values"></loc>
	</h3>
	<div>
		<cla-toggle-switch name="core_values_enabled" large=""></cla-toggle-switch>
	</div>
	<div id="core_values_enabled_body" name="core_values_enabled_body">
		<cla-toggle-switch name="core_values_mandatory"></cla-toggle-switch>
		<include file="../includes/listable_items_admin.html"/>
	</div>
</block>

<include file="../../common/layouts/admin_with_info_panel.html"/>

<script type="text/javascript">
    require(['/intranet/thankyou/js/build/tags.bundle.js'], function (listable_items_admin) {
        listable_items_admin.no_results_banner.text('<loc name="thankyou:admin:core_values:empty"></loc>');
        listable_items_admin.errors_banner.text('<loc name="thankyou:admin:core_values:error:saving"></loc>');
        listable_items_admin.column_headings = [
            '<loc name="common:name"></loc>',
            '<loc name="common:background_colour"></loc>',
            '<loc name="common:active"></loc>',
            '<loc name="common:administrate"></loc>'
        ];
    });

    $('cla-toggle-switch[name="core_values_enabled"]').on('change', function () {
        var checked = $(this).find('input').prop('checked');

        var body = {
            'thankyou_core_values_enabled': checked
        };

        $.ajax({
            url: '/api/thankyou/v2/admin/config',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(body)
        }).done(function (response) {
            if (response) {
                if (checked) {
                    $('#core_values_enabled_body').show();
                } else {
                    $('#core_values_enabled_body').hide();
                }
            }
        });
    });

    $('cla-toggle-switch[name="core_values_mandatory"]').on('change', function () {
        var checked = $(this).find('input').prop('checked');

        var body = {
            'thankyou_core_values_mandatory': checked
        };

        $.ajax({
            url: '/api/thankyou/v2/admin/config',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(body)
        });
    });

</script>
<script type="text/template" id="js-listable-item-admin-item-template">
	<tr class="js-listable-item-admin-row">
		<td>
			<input class="js-listable-item-admin-editable-field" data-name="name" type="text"/>
			<span class="js-listable-item-admin-editable-field-error"></span>
		</td>
		<td>
			<input class="js-listable-item-admin-editable-field" type="text" data-name="bg_colour"/>
			<span class="js-listable-item-admin-editable-field-error"></span>
		</td>
		<td>
			<input class="js-listable-item-admin-editable-field" type="checkbox" data-name="active" checked="1"
				   value="1"/>
			<span class="js-listable-item-admin-editable-field-error"></span>
		</td>
		<td>
			<span class="js-listable-item-admin-edit-button"></span>
			<span class="js-listable-item-admin-delete-button"></span>
			<span class="js-listable-item-admin-reset-button"></span>
		</td>
	</tr>
</script>
