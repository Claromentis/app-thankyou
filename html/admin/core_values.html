<block id="admin_breadcrumb">
	<li><a href="/thankyou/admin/">
		<loc name="thankyou:admin:breadcrumb">Thank You</loc>
	</a></li>
	<li class="active">
		<loc name="thankyou:admin:core_values"></loc>
	</li>
</block>
<block id="info_panel_pills">
	<include file="menu.html"/>
</block>

<block id="page_body">
	<h3>
		<loc name="thankyou:admin:core_values"></loc>
	</h3>
	<div>
		<cla-toggle-switch name="core_values_enabled" large=""></cla-toggle-switch>
	</div>
	<div id="core_values_enabled_body" name="core_values_enabled_body">
		<cla-toggle-switch name="core_values_mandatory"></cla-toggle-switch>
		<component class_key="data_table" name="core_values" service="thankyou.datatable.tags"/>
	</div>
</block>

<include file="../../common/layouts/admin_with_info_panel.html"/>

<script type="text/javascript">
    $('cla-toggle-switch[name="core_values_enabled"]').on('change', function () {
        var checked = $(this).find('input').prop('checked');

        var body = {
            'thankyou_core_values_enabled': checked
        };

        $.ajax({
            url: '/api/thankyou/v2/admin/config',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(body)
        }).done(function (response) {
            if (response) {
                if (checked) {
                    $('#core_values_enabled_body').show();
                } else {
                    $('#core_values_enabled_body').hide();
                }
            }
        });
    });

    $('cla-toggle-switch[name="core_values_mandatory"]').on('change', function () {
        var checked = $(this).find('input').prop('checked');

        var body = {
            'thankyou_core_values_mandatory': checked
        };

        $.ajax({
            url: '/api/thankyou/v2/admin/config',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(body)
        });
    });

</script>
